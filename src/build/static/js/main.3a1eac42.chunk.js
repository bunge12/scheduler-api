(this.webpackJsonpscheduler=this.webpackJsonpscheduler||[]).push([[0],{20:function(e,t,a){e.exports=a(49)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),c=a.n(i),s=(a(25),a(26),a(9));function o(e){var t,a=s({"day-list__item":!0,"day-list__item--selected":e.selected,"day-list__item--full":0===e.spots});return r.a.createElement("li",{className:a,onClick:function(){return e.setDay(e.name)},"data-testid":"day"},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},(t=e.spots)>=2?"".concat(t," spots remaining"):1===t?"1 spot remaining":0===t?"no spots remaining":void 0))}function m(e){return e.days.map((function(t){return r.a.createElement(o,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.day,setDay:e.setDay})}))}function l(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function u(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer.name))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))}function d(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}var p=a(3),E=(a(27),a(9));function v(e){var t=E({button:!0,"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}a(28),a(29);var f=a(9);function _(e){var t=f({interviewers__item:!0,"interviewers__item--selected":e.selected});return r.a.createElement("li",{key:e.id,className:t,selected:e.selected,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected&&e.name)}function b(e){return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},e.interviewers.map((function(t){return r.a.createElement(_,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.value,setInterviewer:function(a){e.onChange(t.id)}})}))))}function g(e){var t=Object(n.useState)(e.interviewer||null),a=Object(p.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)(e.name||""),o=Object(p.a)(s,2),m=o[0],l=o[1],u=Object(n.useState)(""),d=Object(p.a)(u,2),E=d[0],f=d[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name","data-testid":"student-name-input",value:m,onChange:function(e){l(e.target.value)}})),r.a.createElement("section",{className:"appointment__validation"},E),r.a.createElement(b,{interviewers:e.interviewers,value:i,onChange:c})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(v,{onClick:function(){e.onCancel(),l(""),c(null)},danger:!0},"Cancel"),r.a.createElement(v,{onClick:function(){""!==m?null!==i?(f(""),e.onSave(m,i)):f("Interviewer must be selected to proceed!"):f("Student name cannot be blank")},confirm:!0},"Save"))))}function w(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function N(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(v,{danger:!0,onClick:e.onCancel},"Cancel"),r.a.createElement(v,{danger:!0,onClick:e.onConfirm},"Confirm")))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}a(30);var y=a(7);function O(e){var t=e.interviewers,a=function(e){var t=Object(n.useState)(e),a=Object(p.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)([e]),s=Object(p.a)(c,2),o=s[0],m=s[1];return{mode:r,transition:function(e,t){t?(i(e),m((function(e){return o}))):(m((function(t){return[].concat(Object(y.a)(o),[e])})),i(e))},back:function(){if(o.length>1){o.pop();var e=o[o.length-1];i(e),m(o)}}}}(e.interview?"SHOW":"EMPTY"),i=a.mode,c=a.transition,s=a.back,o=function(t,a){c("SAVING");var n={student:t,interviewer:a};e.bookInterview(e.id,n).then((function(){c("SHOW")})).catch((function(){c("ERROR_SAVE",!0)}))};return r.a.createElement("article",{className:"appointment",id:e.id,key:e.id,"data-testid":"appointment"},r.a.createElement(l,{time:e.time}),"SAVING"===i&&r.a.createElement(w,{message:"Saving..."}),"DELETING"===i&&r.a.createElement(w,{message:"Deleting..."}),"ERROR_DELETE"===i&&r.a.createElement(h,{message:"Error deleting...",onClose:s}),"ERROR_SAVE"===i&&r.a.createElement(h,{message:"Error SAVING...",onClose:s}),"EMPTY"===i&&r.a.createElement(d,{onAdd:function(){return c("CREATE")}}),"CONFIRM"===i&&r.a.createElement(N,{message:"Are you sure you want to do this?",onCancel:s,onConfirm:function(){c("DELETING",!0),e.cancelInterview(e.id).then((function(){c("EMPTY")})).catch((function(){c("ERROR_DELETE",!0)}))}}),"SHOW"===i&&r.a.createElement(u,{student:e.interview.student,interviewer:e.interview.interviewer,onDelete:function(){c("CONFIRM")},onEdit:function(){c("EDIT")}}),"CREATE"===i&&r.a.createElement(g,{interviewers:t,onCancel:s,onSave:o}),"EDIT"===i&&r.a.createElement(g,{interviewers:t,onCancel:s,interviewer:e.interview.interviewer.id,name:e.interview.student,onSave:o}))}var j=function(e,t){if(t){var a=e.interviewers[t.interviewer];return{interviewer:{id:t.interviewer,name:a.name,avatar:a.avatar},student:t.student}}return null},C=a(6),k=a(1),I=a(4),S=a.n(I);a(48);function D(e){var t=function(){var e=Object(n.useState)({day:"Monday",days:[],interviewers:{},appointments:{}}),t=Object(p.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Promise.all([Promise.resolve(S.a.get("/api/days")),Promise.resolve(S.a.get("/api/appointments")),Promise.resolve(S.a.get("/api/interviewers"))]).then((function(e){r((function(t){return{day:"Monday",days:e[0].data,interviewers:e[2].data,appointments:e[1].data}}))}))}),[]),{state:a,setDay:function(e){return r(Object(k.a)(Object(k.a)({},a),{},{day:e}))},bookInterview:function(e,t){var n=Object(k.a)(Object(k.a)({},a.appointments[e]),{},{interview:Object(k.a)({},t)}),i=Object(k.a)(Object(k.a)({},a.appointments),{},Object(C.a)({},e,n));return S.a.put("/api/appointments/".concat(e),n).then((function(t){a.days.forEach((function(t){var n=t.appointments,c=a.appointments[e].id;if("undefined"!==typeof n.find((function(e){return e===c}))){var s=t.id-1,o=a.appointments[e].interview?a.days[s].spots:a.days[s].spots-1,m=Object(k.a)(Object(k.a)({},a.days[s]),{},{spots:o}),l=Object(y.a)(a.days);l[s]=m,r((function(e){return Object(k.a)(Object(k.a)({},a),{},{appointments:i,days:l})}))}}))}))},cancelInterview:function(e){var t=Object(k.a)(Object(k.a)({},a.appointments[e]),{},{interview:null}),n=Object(k.a)(Object(k.a)({},a.appointments),{},Object(C.a)({},e,t));return S.a.delete("/api/appointments/".concat(e)).then((function(t){a.days.forEach((function(t){var i=t.appointments,c=a.appointments[e].id;if("undefined"!==typeof i.find((function(e){return e===c}))){var s=t.id-1,o=a.days[s].spots+1,m=Object(k.a)(Object(k.a)({},a.days[s]),{},{spots:o}),l=Object(y.a)(a.days);l[s]=m,r((function(e){return Object(k.a)(Object(k.a)({},a),{},{appointments:n,days:l})}))}}))}))}}}(),a=t.state,i=t.setDay,c=t.bookInterview,s=t.cancelInterview,o=function(e,t){var a=e.days.find((function(e){return e.name===t}));return a?a.interviewers.map((function(t){return e.interviewers[t]})):[]}(a,a.day),l=function(e,t){var a=e.days.find((function(e){return e.name===t}));return a?a.appointments.map((function(t){return e.appointments[t]})):[]}(a,a.day).map((function(e){return r.a.createElement(O,Object.assign({key:e.id},e,{interview:j(a,e.interview),interviewers:o,bookInterview:c,cancelInterview:s}))}));return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(m,{days:a.days,day:a.day,setDay:i})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},r.a.createElement("section",{className:"schedule"},l,r.a.createElement(O,{key:"last",time:"5pm"}))))}c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3a1eac42.chunk.js.map